(this["webpackJsonppractica-lsv-client"]=this["webpackJsonppractica-lsv-client"]||[]).push([[0],{214:function(e,t,a){},215:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(60),c=a.n(o),s=a(15),i=a.n(s),l=a(19),d=a(7),j=(a(195),a(38)),u=a(17),b=a(20),p=a(3),x=a(12),h=a(302),m=a(303),g=a(282),O=a(294),f=a(311),v=a(304),y=a(312),w=a(94),_=a.n(w),S=a(310),C=a(301),k=a(316),I=a(153),D=a(308);function z(){return(z=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=t.logs)&&a.length>0)){e.next=12;break}return e.prev=2,e.next=5,fetch("http://localhost:4000/logs",{method:"POST",headers:{"Content-type":"application/json",token:localStorage.token},body:JSON.stringify({logs:a})});case 5:204===e.sent.status?console.info("logs sent"):console.error("Unknown errors sending logs"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Connection error sending logs");case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var T=function(e){return z.apply(this,arguments)},A=a(0);function P(e){return Object(A.jsxs)(S.a,Object(x.a)(Object(x.a)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["Copyright \xa9 ",Object(A.jsx)(f.a,{color:"inherit",href:"http://www.ula.ve",children:"Universidad de los Andes"})," ",(new Date).getFullYear(),"."]}))}var E=Object(I.a)();function M(e){var t=e.setAuth,a=Object(n.useState)({email:"",password:""}),r=Object(d.a)(a,2),o=r[0],c=r[1],s=Object(n.useState)(!1),j=Object(d.a)(s,2),u=j[0],w=j[1],I=function(){var e=Object(l.a)(i.a.mark((function e(a){var n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,w(!0),n={correo:o.email,contrasena:o.password},e.next=6,fetch("http://localhost:4000/auth/login",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)});case 6:return r=e.sent,e.next=9,r.json();case 9:c=e.sent,w(!1),c.token?(localStorage.setItem("token",c.token),t(!0),b.b.success("Sesi\xf3n iniciada correctamente"),T({logs:[{log_name:"Aprendiz: Inicia sesi\xf3n",timestamp:(new Date).toISOString()}]})):(t(!1),b.b.error(c)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.error(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),z=function(e){return c(Object(x.a)(Object(x.a)({},o),{},Object(p.a)({},e.target.name,e.target.value)))};return Object(A.jsx)(D.a,{theme:E,children:Object(A.jsxs)(C.a,{component:"main",maxWidth:"xs",children:[Object(A.jsx)(g.a,{}),Object(A.jsxs)(y.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(A.jsx)(h.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(A.jsx)(_.a,{})}),Object(A.jsx)(S.a,{component:"h1",variant:"h5",children:"Inicio de sesi\xf3n"}),Object(A.jsxs)(y.a,{component:"form",onSubmit:I,noValidate:!0,sx:{mt:1},children:[Object(A.jsx)(O.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Correo electronico",name:"email",type:"email",onChange:z,autoComplete:"email",autoFocus:!0}),Object(A.jsx)(O.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Contrase\xf1a",type:"password",id:"password",onChange:z,autoComplete:"current-password"}),Object(A.jsx)(m.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:!o.email||!o.password||u,children:u?Object(A.jsx)(k.a,{color:"inherit",size:25}):"Iniciar sesi\xf3n"}),Object(A.jsx)(v.a,{container:!0,children:Object(A.jsx)(v.a,{item:!0,children:Object(A.jsx)(f.a,{href:"/register",variant:"body2",children:"\xbfNo tienes una cuenta? Registrate"})})})]})]}),Object(A.jsx)(P,{sx:{mt:8,mb:4}})]})})}var F=a(298),W=a(319),G=a(291),L=a(154),R=a(292),N=a(289),V=a(295),H=a(305),J=a(313),U=a(283);function Y(e){return String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}function q(e){return Object(A.jsxs)(S.a,Object(x.a)(Object(x.a)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["Copyright \xa9 ",Object(A.jsx)(f.a,{color:"inherit",href:"http://www.ula.ve",children:"Universidad de los Andes"})," ",(new Date).getFullYear(),"."]}))}var B=Object(I.a)();function Q(e){var t=e.setAuth,a=r.a.useState({nombre:null,apellido:null,correo:null,contrasena:null,pais:null,ciudad:null,escuela:null,tipo_aprendiz:null,grado_instruccion_aprendiz:null,fecha_nacimiento:null,rol_usuario_id:null,genero:null}),o=Object(d.a)(a,2),c=o[0],s=o[1],j=r.a.useState(null),u=Object(d.a)(j,2),w=u[0],I=u[1],z=r.a.useState({roles:[],paises:[],ciudades:[],escuelas:[],tipoAprendiz:["Estudiante","Familiar","A fin a la instituci\xf3n","Otro"],nivelInstruccion:["Primario","Profesional","Secundario","Medio-superior","Superior"]}),T=Object(d.a)(z,2),P=T[0],E=T[1],M=r.a.useState(!1),Q=Object(d.a)(M,2),Z=Q[0],X=Q[1],$=function(){var e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:4000/auth/register-metadata",{method:"GET",headers:{"Content-type":"application/json"}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,E(Object(x.a)(Object(x.a)({},P),a)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),K=r.a.useState(!1),ee=Object(d.a)(K,2),te=ee[0],ae=ee[1],ne=r.a.useState(!1),re=Object(d.a)(ne,2),oe=re[0],ce=re[1];Object(n.useEffect)((function(){$()}),[]);var se=function(e){ce(!1),s(Object(x.a)(Object(x.a)({},c),{},Object(p.a)({},e.target.name,e.target.value)))},ie=function(e){if(ce(!1),console.log({event:e,name:e.target.name,value:e.target.value}),"input"===e.target.localName)setTimeout((function(){s(Object(x.a)(Object(x.a)({},c),{},Object(p.a)({},e.target.name,e.target.value)))}),400);else{var t=e.target.id.split("-")[0];s(Object(x.a)(Object(x.a)({},c),{},Object(p.a)({},t,e.target.textContent)))}},le=function(){var e=Object(l.a)(i.a.mark((function e(a){var n,r,o,s,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),n=!1,c.nombre&&c.apellido&&c.correo&&c.contrasena&&c.pais&&c.ciudad&&c.escuela&&c.fecha_nacimiento&&c.rol_usuario_id&&c.genero&&(2!==Number(c.rol_usuario_id)||c.tipo_aprendiz&&c.grado_instruccion_aprendiz)&&Y(c.correo)||(n=!0),ce(n),!n){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,ae(!0),r=new Date(c.fecha_nacimiento),o="".concat(r.getFullYear(),"-").concat(r.getMonth(),"-").concat(r.getDay()),s=Object(x.a)(Object(x.a)({},c),{},{fecha_nacimiento:o}),e.next=13,fetch("http://localhost:4000/auth/register",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(s)});case 13:return l=e.sent,e.next=16,l.json();case 16:d=e.sent,ae(!1),d.token?(localStorage.setItem("token",d.token),t(!0),b.b.success("Cuenta creada correctamente")):(t(!1),b.b.error(d)),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(6),b.b.error("Error de conexion."),ae(!1),console.error(e.t0.message);case 26:case"end":return e.stop()}}),e,null,[[6,21]])})));return function(t){return e.apply(this,arguments)}}();return Object(A.jsx)(D.a,{theme:B,children:Object(A.jsxs)(C.a,{component:"main",maxWidth:"xs",children:[Object(A.jsx)(g.a,{}),Object(A.jsxs)(y.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(A.jsx)(h.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(A.jsx)(_.a,{})}),Object(A.jsx)(S.a,{component:"h1",variant:"h5",children:"Registro de usuario"}),Object(A.jsxs)(y.a,{component:"form",noValidate:!0,onSubmit:le,sx:{mt:3},children:[Object(A.jsxs)(v.a,{container:!0,spacing:2,children:[Object(A.jsx)(v.a,{item:!0,xs:12,sm:6,children:Object(A.jsx)(O.a,{autoComplete:"given-name",name:"nombre",required:!0,fullWidth:!0,id:"nombre",label:"Nombres",onChange:se,autoFocus:!0})}),Object(A.jsx)(v.a,{item:!0,xs:12,sm:6,children:Object(A.jsx)(O.a,{required:!0,fullWidth:!0,id:"apellido",label:"Apellidos",name:"apellido",onChange:se,autoComplete:"family-name"})}),Object(A.jsx)(v.a,{item:!0,xs:12,children:Object(A.jsx)(L.a,{dateAdapter:G.a,children:Object(A.jsx)(N.a,{spacing:3,children:Object(A.jsx)(R.a,{disableFuture:!0,label:"Fecha de nacimiento",openTo:"year",views:["year","month","day"],value:w,onChange:function(e){I(e),s(Object(x.a)(Object(x.a)({},c),{},{fecha_nacimiento:e}))},renderInput:function(e){return Object(A.jsx)(O.a,Object(x.a)({},e))}})})})}),Object(A.jsx)(v.a,{item:!0,xs:12,children:Object(A.jsx)(O.a,{required:!0,fullWidth:!0,id:"correo",label:"Correo electronico",name:"correo",type:"email",onChange:se,autoComplete:"email"})}),Object(A.jsx)(v.a,{item:!0,xs:12,children:Object(A.jsx)(O.a,{required:!0,fullWidth:!0,name:"contrasena",label:"Contrase\xf1a",type:"password",id:"contrasena",onChange:se,autoComplete:"new-password"})}),Object(A.jsx)(v.a,{item:!0,xs:12,sm:6,children:Object(A.jsx)(F.a,{disablePortal:!0,id:"pais",options:P.paises,name:"pais",onChange:ie,renderInput:function(e){return Object(A.jsx)(O.a,Object(x.a)(Object(x.a)({},e),{},{name:"pais",label:"Pais"}))}})}),Object(A.jsx)(v.a,{item:!0,xs:12,sm:6,children:Object(A.jsx)(F.a,{disablePortal:!0,id:"ciudad",options:P.ciudades,name:"ciudad",onChange:ie,renderInput:function(e){return Object(A.jsx)(O.a,Object(x.a)(Object(x.a)({},e),{},{name:"ciudad",label:"Ciudad"}))}})}),Object(A.jsx)(v.a,{item:!0,xs:12,children:Object(A.jsx)(F.a,{disablePortal:!0,id:"escuela",options:P.escuelas,name:"escuela",onChange:ie,renderInput:function(e){return Object(A.jsx)(O.a,Object(x.a)(Object(x.a)({},e),{},{name:"escuela",label:"Escuela"}))}})}),Object(A.jsx)(v.a,{item:!0,xs:12,sm:6,children:Object(A.jsxs)(J.a,{onChange:se,children:[Object(A.jsx)(U.a,{id:"gender-options",children:"Genero"}),Object(A.jsxs)(H.a,{"aria-labelledby":"gender-options",name:"genero",children:[Object(A.jsx)(W.a,{value:"femenino",control:Object(A.jsx)(V.a,{}),label:"Femenino"}),Object(A.jsx)(W.a,{value:"masculino",control:Object(A.jsx)(V.a,{}),label:"Masculino"}),Object(A.jsx)(W.a,{value:"otro",control:Object(A.jsx)(V.a,{}),label:"Otro"})]})]})}),Object(A.jsx)(v.a,{item:!0,xs:12,sm:6,children:Object(A.jsxs)(J.a,{onChange:function(e){ce(!1);var t=2===Number(e.target.value);X(t),se(e)},children:[Object(A.jsx)(U.a,{id:"user-role",children:"Rol de usuario"}),Object(A.jsxs)(H.a,{"aria-labelledby":"user-role",name:"rol_usuario_id",children:[Object(A.jsx)(W.a,{value:2,control:Object(A.jsx)(V.a,{}),label:"Aprendiz"}),Object(A.jsx)(W.a,{value:1,control:Object(A.jsx)(V.a,{}),label:"Profesor"})]})]})})]}),Object(A.jsx)(v.a,{item:!0,xs:12,style:{padding:Z?"16px 0px 0px 0px":"0px"},children:Z?Object(A.jsx)(F.a,{disablePortal:!0,id:"tipo_aprendiz",options:P.tipoAprendiz,name:"tipo_aprendiz",onChange:ie,renderInput:function(e){return Object(A.jsx)(O.a,Object(x.a)(Object(x.a)({},e),{},{name:"tipo_aprendiz",label:"Tipo de Aprendiz"}))}}):""}),Object(A.jsx)(v.a,{item:!0,xs:12,style:{padding:Z?"16px 0px 0px 0px":"0px"},children:Z?Object(A.jsx)(F.a,{disablePortal:!0,id:"grado_instruccion_aprendiz",options:P.nivelInstruccion,name:"grado_instruccion_aprendiz",onChange:ie,renderInput:function(e){return Object(A.jsx)(O.a,Object(x.a)(Object(x.a)({},e),{},{name:"grado_instruccion_aprendiz",label:"Nivel de instrucci\xf3n"}))}}):""}),Object(A.jsx)(v.a,{item:!0,xs:12,style:{padding:oe?"16px 0px 0px 0px":"0px"},children:oe?Object(A.jsx)(S.a,{variant:"caption",display:"block",style:{color:"red"},children:"Debe completar todos los campos."}):""}),Object(A.jsx)(m.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:oe||te,children:te?Object(A.jsx)(k.a,{color:"inherit",size:25}):"Registrarse"}),Object(A.jsx)(v.a,{container:!0,justifyContent:"flex-end",children:Object(A.jsx)(v.a,{item:!0,children:Object(A.jsx)(f.a,{href:"/login",variant:"body2",children:"\xbfTienes una cuenta? Inicia sesi\xf3n"})})})]})]}),Object(A.jsx)(q,{sx:{mt:5}})]})})}var Z=a(5),X=a(33),$=a(306),K=a(320),ee=a(323),te=a(315),ae=a(324),ne=a(317),re=a(141),oe=a.n(re),ce=a(52),se=a.n(ce),ie=a(142),le=a.n(ie),de=a(140),je=a.n(de),ue=a(139),be=a.n(ue),pe=a(290),xe=a(321),he=a(322);function me(e){return Object(A.jsxs)(S.a,Object(x.a)(Object(x.a)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["Copyright \xa9 ",Object(A.jsx)(f.a,{color:"inherit",href:"https://mui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]}))}var ge=Object(Z.a)(K.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return Object(x.a)({zIndex:t.zIndex.drawer+1,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},a&&{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})})})),Oe=Object(Z.a)($.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return{"& .MuiDrawer-paper":Object(x.a)({position:"relative",whiteSpace:"nowrap",width:240,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen}),boxSizing:"border-box"},!a&&Object(p.a)({overflowX:"hidden",transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),width:t.spacing(7)},t.breakpoints.up("sm"),{width:t.spacing(9)}))}})),fe=Object(I.a)(),ve=Object(Z.a)("div")((function(e){var t=e.theme;return{display:"flex",alignItems:"center",padding:t.spacing(2,2.5),borderRadius:1.5*Number(t.shape.borderRadius),backgroundColor:t.palette.grey[50012]||"#ddd"}}));function ye(e){var t=e.funcionalidad_sistema,a=Object(u.h)();if(!t)return null;return[{funcionalidad:"panel-practica",element:Object(A.jsxs)(pe.a,{onClick:function(){a("explorar")},children:[Object(A.jsx)(xe.a,{children:Object(A.jsx)(be.a,{})}),Object(A.jsx)(he.a,{primary:"Explora y practica"})]},"pp001")},{funcionalidad:"panel-profesor",element:Object(A.jsxs)(pe.a,{onClick:function(){a("aprendices")},children:[Object(A.jsx)(xe.a,{children:Object(A.jsx)(je.a,{})}),Object(A.jsx)(he.a,{primary:"Aprendices"})]},"pp002")}].filter((function(e){return t.includes(e.funcionalidad)})).map((function(e){return e.element}))}function we(e){var t=e.setAuth,a=r.a.useState(!1),n=Object(d.a)(a,2),o=n[0],c=n[1],s=r.a.useState(!0),j=Object(d.a)(s,2),p=j[0],m=j[1],O=r.a.useState({}),f=Object(d.a)(O,2),v=f[0],w=f[1],_=function(){m(!p)},k=function(){var e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:4000/usuario",{method:"GET",headers:{"Content-type":"application/json",token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,w(Object(x.a)({},a)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(l.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault();try{localStorage.removeItem("token"),b.b.success("Sesi\xf3n cerrada"),t(!1),T({logs:[{log_name:"Aprendiz: Cierra sesi\xf3n",timestamp:(new Date).toISOString()}]})}catch(n){console.error(n.message)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();r.a.useEffect((function(){k()}),[]);var z=Object(X.a)();return!o&&window.innerWidth<=z.breakpoints.values.sm&&setTimeout((function(){m(!1),c(!0)}),400),Object(A.jsx)(D.a,{theme:fe,children:Object(A.jsxs)(y.a,{sx:{display:"flex"},children:[Object(A.jsx)(g.a,{}),Object(A.jsx)(ge,{position:"absolute",open:p,children:Object(A.jsxs)(ee.a,{sx:{pr:"24px"},children:[p?Object(A.jsx)(ne.a,{onClick:_,children:Object(A.jsx)(se.a,{})}):Object(A.jsx)(ne.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:_,sx:Object(x.a)({marginRight:"36px"},p&&{display:"none"}),children:Object(A.jsx)(oe.a,{})}),Object(A.jsx)(S.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,sx:{flexGrow:1},children:"Practica LSV"}),Object(A.jsx)(ne.a,{edge:"start",color:"inherit","aria-label":"logout",onClick:I,children:Object(A.jsx)(le.a,{})})]})}),Object(A.jsxs)(Oe,{variant:"permanent",open:p,sx:{backgraundColor:"#1976d2",color:"#fff"},children:[Object(A.jsx)(y.a,{sx:{mb:2,mx:1.5},style:{marginTop:"16px"},children:p?Object(A.jsxs)(ve,{children:[Object(A.jsx)(h.a,{src:"/image.png",alt:"photoURL"}),Object(A.jsxs)(y.a,{sx:{ml:1},children:[Object(A.jsx)(S.a,{variant:"subtitle2",sx:{color:"text.primary"},children:"".concat(v.nombre," ").concat(v.apellido)}),Object(A.jsx)(S.a,{variant:"body2",sx:{color:"text.secondary"},children:v.rol_usuario})]})]}):null}),Object(A.jsx)(ae.a,{sx:{my:1}}),Object(A.jsx)(te.a,{component:"nav",children:Object(A.jsx)(ye,{funcionalidad_sistema:v.funcionalidad_sistema})})]}),Object(A.jsxs)(y.a,{component:"main",sx:{backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900]},flexGrow:1,height:"100vh",overflow:"auto"},children:[Object(A.jsx)(ee.a,{}),Object(A.jsxs)(C.a,{maxWidth:"lg",sx:{mt:4,mb:4},children:[Object(A.jsx)(u.b,{}),Object(A.jsx)(me,{sx:{pt:4}})]})]})]})})}function _e(e){var t=e.setAuth;return Object(A.jsx)(we,{setAuth:t})}var Se=a(333),Ce=Object(Z.a)("div")((function(e){var t=e.theme;return{display:"flex",alignItems:"center",borderRadius:1.5*Number(t.shape.borderRadius),backgroundColor:t.palette.grey[50012]||"#e3e4fa"}})),ke=function(e){var t=e.grados,a=e.setQuery;return t.map((function(e,t){return Object(A.jsx)(v.a,{item:!0,xs:4,sm:4,md:4,children:Object(A.jsx)(Ce,{children:Object(A.jsxs)(pe.a,{onClick:function(){a({grado:e.id})},children:[Object(A.jsx)(Se.a,{children:Object(A.jsx)(h.a,{src:e.image_src})}),Object(A.jsx)(he.a,{primary:e.nombre})]})})},t)}))};function Ie(){var e=Object(j.b)(),t=Object(d.a)(e,2),a=(t[0],t[1]),r=n.useState([]),o=Object(d.a)(r,2),c=o[0],s=o[1],u=n.useState(!1),p=Object(d.a)(u,2),x=p[0],h=p[1],m=function(){var e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(!0),e.next=4,fetch("http://localhost:4000/grados",{method:"GET",headers:{"Content-type":"application/json",token:localStorage.token}});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,s(a),h(!1),T({logs:[{log_name:"Aprendiz: Visualiza lista de grados",timestamp:(new Date).toISOString()}]}),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),h(!1),console.error(e.t0),b.b.error("Error de red");case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();return n.useEffect((function(){m()}),[]),x?Object(A.jsx)(v.a,{container:!0,direction:"row",justifyContent:"center",children:Object(A.jsx)(k.a,{color:"inherit",size:25})}):Object(A.jsx)(y.a,{sx:{flexGrow:1},children:Object(A.jsx)(v.a,{container:!0,spacing:{xs:2,md:4},columns:{xs:4,sm:8,md:8},children:Object(A.jsx)(ke,{grados:c,setQuery:a})})})}var De=a(334),ze=a(335),Te=a(325),Ae=function(e){var t=e.temas,a=e.setQuery;return t.map((function(e,t){return Object(A.jsx)(v.a,{item:!0,xs:4,sm:4,md:4,children:Object(A.jsxs)(De.a,{sx:{display:"flex",justifyContent:"space-between",backgroundColor:"#e3e4fa"},children:[Object(A.jsx)(Te.a,{component:"img",sx:{width:130,height:130,objectFit:"contain"},image:e.tema_image_src,alt:"Live from space album cover"}),Object(A.jsxs)(y.a,{sx:{display:"flex",flexDirection:"column",flexGrow:1},children:[Object(A.jsxs)(ze.a,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start"},children:[Object(A.jsx)(S.a,{variant:"subtitle1",color:"text.secondary",component:"div",children:e.tema_nombre}),Object(A.jsx)(S.a,{variant:"string",color:"text.secondary",component:"div",style:{color:"#999999",fontSize:"12px"},children:"Tema"})]}),Object(A.jsx)(y.a,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",pl:1,pb:1,padding:"16px"},children:Object(A.jsx)(m.a,{variant:"outlined",onClick:function(){a({grado:e.grado_id,tema:e.tema_id})},children:"Explorar"})})]})]})},t)}))};function Pe(e){var t=e.grado,a=Object(j.b)(),r=Object(d.a)(a,2),o=(r[0],r[1]),c=n.useState([]),s=Object(d.a)(c,2),u=s[0],p=s[1],x=n.useState(!1),h=Object(d.a)(x,2),g=h[0],O=h[1],f=n.useState(),w=Object(d.a)(f,2),_=w[0],C=w[1],I=function(){var e=Object(l.a)(i.a.mark((function e(){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(!0),e.next=4,fetch("http://localhost:4000/temas-by-grado/".concat(t),{method:"GET",headers:{"Content-type":"application/json",token:localStorage.token}});case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,p(n),O(!1),r=n&&n[0]?n[0].grado_nombre:null,C(r),T({logs:[{log_name:"Aprendiz: Visualiza lista de temas",timestamp:(new Date).toISOString(),grado:r}]}),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),O(!1),console.error(e.t0),b.b.error("Error de red");case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return n.useEffect((function(){I()}),[]),g?Object(A.jsx)(v.a,{container:!0,direction:"row",justifyContent:"center",children:Object(A.jsx)(k.a,{color:"inherit",size:25})}):Object(A.jsxs)(y.a,{sx:{flexGrow:1},children:[Object(A.jsx)(y.a,{style:{display:"flex",justifyContent:"flex-start"},children:Object(A.jsx)(m.a,{variant:"outlined",color:"warning",startIcon:Object(A.jsx)(se.a,{}),onClick:function(){window.history.back()},children:"Volver"})}),Object(A.jsxs)(S.a,{variant:"h4",sx:{color:"text.primary",padding:"16px"},children:["Temas de ",Object(A.jsx)("b",{children:_})]}),Object(A.jsx)(v.a,{container:!0,spacing:{xs:2,md:4},columns:{xs:4,sm:8,md:8},children:Object(A.jsx)(Ae,{temas:u,setQuery:o})})]})}var Ee=a(143),Me=a(297);function Fe(e){var t=e.embedLink,a=new URL(t),n=new URLSearchParams(a.search).get("v"),r={height:"300px",width:"100%",playerVars:{autoplay:1,loop:1,playlist:n}};return Object(A.jsx)("div",{style:{backgroundColor:"red",position:"relative",width:"100%",height:"300px",paddingTtop:"60.93%"},children:Object(A.jsx)("div",{style:{position:"absolute",top:0,left:0,bottom:0,right:0,textAlign:"center"},children:Object(A.jsx)(Ee.a,{videoId:n,opts:r,onReady:function(e){}})})})}var We={position:"absolute",top:"20%",left:"20%",transform:"translate(-10%, -10%)",width:"80%",minHeight:"400px",bgcolor:"background.paper",border:"1px solid #666",borderRadius:"16px",boxShadow:24,p:4};function Ge(e){var t,a,r=e.buttonText,o=e.vocablo,c=e.onlyModal,s=n.useState(!1),j=Object(d.a)(s,2),u=j[0],b=j[1],p=function(){return b(!1)},x=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:4000/vocablo-visto",{method:"POST",headers:{"Content-type":"application/json",token:localStorage.token},body:JSON.stringify({grado_id:o.grado_id,tema_id:o.tema_id,vocablo_id:o.vocablo_id})});case 3:204===e.sent.status?console.info("vocablo visto"):console.error("Unknown errors sending vocablo-visto"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Connection error sending vocablo-visto");case 10:b(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),h=o&&o.recursos?o.recursos.findIndex((function(e){return"image"===e.tipo})):-1,g=o&&o.recursos?o.recursos.findIndex((function(e){return"video"===e.tipo})):-1;return-1!==h&&(t=o.recursos[h].enlace),-1!==g&&(a=o.recursos[g].enlace),c&&b(!0),Object(A.jsxs)("div",{children:[c?null:Object(A.jsx)(m.a,{variant:"outlined",onClick:function(){return b(!0)},children:r}),Object(A.jsx)(Me.a,{open:u,onClose:p,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:Object(A.jsx)(y.a,{sx:We,children:Object(A.jsxs)(v.a,{container:!0,spacing:{xs:2,sm:3,md:3},columns:{xs:4,sm:8,md:8},children:[Object(A.jsxs)(v.a,{item:!0,xs:4,sm:4,md:4,children:[Object(A.jsx)(S.a,{id:"keep-mounted-modal-title",variant:"subtitle2",children:"Imagen"}),Object(A.jsx)(Te.a,{component:"img",sx:{maxWidth:350,maxHeight:300},image:t,alt:"imagen del vocablo ".concat(o.vocablo_palabra)})]}),Object(A.jsxs)(v.a,{item:!0,xs:4,sm:4,md:4,children:[Object(A.jsx)(S.a,{id:"keep-mounted-modal-title",variant:"subtitle2",children:"Video"}),Object(A.jsx)(Fe,{embedLink:a})]}),Object(A.jsxs)(v.a,{item:!0,xs:4,sm:4,md:4,children:[Object(A.jsx)(S.a,{id:"keep-mounted-modal-description",variant:"subtitle2",children:"Palabra"}),Object(A.jsx)(S.a,{id:"keep-mounted-modal-title",variant:"h3",component:"h2",children:o.vocablo_palabra})]}),Object(A.jsxs)(v.a,{item:!0,xs:4,sm:4,md:4,style:{minHeight:"150px",display:"flex",justifyContent:"flex-end",alignItems:"flex-end",alignSelf:"stretch"},children:[Object(A.jsx)(m.a,{variant:"text",color:"error",onClick:p,children:"Cerrar"}),Object(A.jsx)(m.a,{variant:"contained",color:"success",onClick:x,style:{marginLeft:"24px"},children:"Aprendido"})]})]})})})]})}var Le=function(e){var t=e.vocablos;e.setQuery;return t.map((function(e,t){var a,n=e&&e.recursos?e.recursos.findIndex((function(e){return"image"===e.tipo})):-1;return-1!==n&&(a=e.recursos[n].enlace),Object(A.jsx)(v.a,{item:!0,xs:4,sm:4,md:4,children:Object(A.jsxs)(De.a,{sx:{display:"flex",justifyContent:"space-between",backgroundColor:"#fff"},children:[Object(A.jsx)(Te.a,{component:"img",sx:{width:130,height:130,objectFit:"contain"},image:a,alt:"Live from space album cover"}),Object(A.jsxs)(y.a,{sx:{display:"flex",flexDirection:"column",flexGrow:1},children:[Object(A.jsxs)(ze.a,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start"},children:[Object(A.jsx)(S.a,{variant:"subtitle1",color:"text.secondary",component:"div",children:e.vocablo_palabra}),Object(A.jsx)(S.a,{variant:"string",color:"text.secondary",component:"div",style:{color:"#999999",fontSize:"12px"},children:"Vocablo"})]}),Object(A.jsx)(y.a,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",pl:1,pb:1,padding:"16px"},children:Object(A.jsx)(Ge,{buttonText:"Estudiar vocablo",vocablo:e})})]})]})},t)}))};function Re(e){var t=e.grado,a=e.tema,r=Object(j.b)(),o=Object(d.a)(r,2),c=(o[0],o[1]),s=n.useState([]),p=Object(d.a)(s,2),x=p[0],h=p[1],g=n.useState(!1),O=Object(d.a)(g,2),f=O[0],w=O[1],_=n.useState(),C=Object(d.a)(_,2),I=C[0],D=C[1],z=n.useState(),P=Object(d.a)(z,2),E=P[0],M=P[1],F=Object(u.h)(),W=function(){var e=Object(l.a)(i.a.mark((function e(){var n,r,o,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(!0),e.next=4,fetch("http://localhost:4000/vocablos-by-grado-tema/".concat(t,"/").concat(a),{method:"GET",headers:{"Content-type":"application/json",token:localStorage.token}});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,h(r),w(!1),o=r&&r[0]?r[0].grado_nombre:null,c=r&&r[0]?r[0].tema_nombre:null,D(o),M(c),T({logs:[{log_name:"Aprendiz: Vizualiza tema",timestamp:(new Date).toISOString(),grado:o,tema:c}]}),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(0),w(!1),console.error(e.t0),b.b.error("Error de red");case 22:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}();return n.useEffect((function(){W()}),[]),f?Object(A.jsx)(v.a,{container:!0,direction:"row",justifyContent:"center",children:Object(A.jsx)(k.a,{color:"inherit",size:25})}):Object(A.jsxs)(y.a,{sx:{flexGrow:1},children:[Object(A.jsxs)(y.a,{style:{display:"flex",justifyContent:"space-between"},children:[Object(A.jsx)(m.a,{variant:"outlined",color:"warning",startIcon:Object(A.jsx)(se.a,{}),onClick:function(){window.history.back()},children:"Volver"}),Object(A.jsx)(m.a,{variant:"contained",color:"primary",size:"large",onClick:function(){F("/dashboard/practica?grado=".concat(t,"&tema=").concat(a))},children:"Comenzar Practica"})]}),Object(A.jsxs)(S.a,{variant:"h4",sx:{color:"text.primary",padding:"16px"},children:["Vocablos de ",Object(A.jsx)("b",{children:E})," - ",Object(A.jsx)("span",{style:{color:"#999"},children:I})]}),Object(A.jsx)(v.a,{container:!0,spacing:{xs:2,md:4},columns:{xs:4,sm:8,md:12},children:Object(A.jsx)(Le,{vocablos:x,setQuery:c})}),Object(A.jsx)(y.a,{style:{display:"flex",justifyContent:"flex-end",marginTop:"16px"},children:Object(A.jsx)(m.a,{variant:"contained",color:"primary",size:"large",onClick:function(){F("/dashboard/practica?grado=".concat(t,"&tema=").concat(a))},children:"Comenzar Practica"})})]})}function Ne(){var e="grados",t=Object(j.b)(),a=Object(d.a)(t,2),n=a[0],r=(a[1],n.get("grado")),o=n.get("tema");return"string"===typeof r&&(e="temas"),"temas"===e&&"string"===typeof o&&(e="vocablos"),"temas"===e?Object(A.jsx)(Pe,{grado:Number(r)}):"vocablos"===e?Object(A.jsx)(Re,{grado:Number(r),tema:Number(o)}):Object(A.jsx)(Ie,{})}var Ve=a(16),He=a(44),Je=a(299),Ue=a(326),Ye=a(296),qe=a(318),Be=a(146),Qe=a.n(Be),Ze=a(147),Xe=a.n(Ze),$e=a(148),Ke=a.n($e),et=a(149),tt=a.n(et),at=a(150),nt=a.n(at);function rt(e){var t=e.imageSrc,a=e.message;return Object(A.jsxs)(y.a,{sx:{display:"flex",justifyContent:"space-between",backgroundColor:"#fff"},children:[Object(A.jsx)(Te.a,{component:"img",sx:{width:80,height:80},image:t,alt:"Live from space album cover"}),Object(A.jsx)(y.a,{sx:{display:"flex",flexDirection:"column",flexGrow:1},children:Object(A.jsx)(ze.a,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start"},children:Object(A.jsx)(S.a,{variant:"h6",color:"text.secondary",component:"div",children:a})})})]})}var ot=[{message:"\xa1Bien hecho!",imageSrc:"/assets/trofeos/good-response.png"},{message:"\xa1Buen trabajo!",imageSrc:"/assets/trofeos/good-response.png"},{message:"\xa1Genial!",imageSrc:"/assets/trofeos/good-response.png"},{message:"\xa1Excelente!",imageSrc:"/assets/trofeos/good-response.png"},{message:"\xa1Perfecto!",imageSrc:"/assets/trofeos/good-response.png"}],ct=[{message:"\xa1Sigue intentando!",imageSrc:"/assets/trofeos/bad-response.png"},{message:"\xa1Vamos! Tu puedes",imageSrc:"/assets/trofeos/bad-response.png"},{message:"No es correcto.",imageSrc:"/assets/trofeos/bad-response.png"},{message:"\xa1Puedes hacerlo!",imageSrc:"/assets/trofeos/bad-response.png"}],st=[{message:"\xa1Lo lograste!",imageSrc:"/assets/trofeos/corrected-response.png"},{message:"\xa1Asi es!",imageSrc:"/assets/trofeos/corrected-response.png"},{message:"\xa1Eso era todo!",imageSrc:"/assets/trofeos/corrected-response.png"},{message:"\xa1Sigue asi!",imageSrc:"/assets/trofeos/corrected-response.png"}],it={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"300px",minHeight:"300px",bgcolor:"background.paper",border:"1px solid #666",borderRadius:"16px",boxShadow:24,p:4,display:"flex",flexDirection:"column",justifyContent:"center"};function lt(e){for(var t=e.vocablos,a=e.numeroConsultas,n=t.map((function(e){return e.vocablo_palabra})),r=a<=t.length?a:t.length,o=t.slice(0),c=[],s=["image","video"],i=0;i<r;i++){var l=Math.floor(Math.random()*o.length),d=o.splice(l,1)[0],j=d&&d.recursos?d.recursos.findIndex((function(e){return"image"===e.tipo})):-1,u=void 0,b=d&&d.recursos?d.recursos.findIndex((function(e){return"video"===e.tipo})):-1,p=void 0;-1!==j&&(u=d.recursos[j].enlace),-1!==b&&(p=d.recursos[b].enlace),d.imageSrc=u,d.videoSrc=p;var x=Math.floor(Math.random()*s.length);d.tipo_consulta=s[x],c.push(d)}for(var h=function(e){var t=c[e].vocablo_palabra,a=n.filter((function(e){return e!==t})),r=[t],o=Math.floor(Math.random()*a.length);r.push(a.splice(o,1)[0]);var s=Math.floor(Math.random()*a.length);r.push(a.splice(s,1)[0]);var i=[],l=Math.floor(Math.random()*r.length);i.push(r.splice(l,1)[0]);var d=Math.floor(Math.random()*r.length);i.push(r.splice(d,1)[0]),i.push(r[0]),c[e].palabras_consulta=i},m=0;m<c.length;m++)h(m);return c}function dt(e){var t=e.consultas,a=e.secondsByConsulta,n=void 0===a?5:a;if(!t||0===t.length)return!1;var r,o=t.length,c=0,s=Object(He.a)(t);try{for(s.s();!(r=s.n()).done;){var i=r.value;if(i.vocablo_palabra===i.responses[0]&&(c+=1),!i.responses||!i.logs)return!1}}catch(b){s.e(b)}finally{s.f()}var l=t[0].logs[0],d=t[t.length-1].logs[t[t.length-1].logs.length-1],j=new Date(l.timestamp).getTime(),u=new Date(d.timestamp).getTime()-j;return u>0&&u<=1e3*n&&o===c}function jt(e){var t=e.consultas,a=e.vocablos;if(t&&0!==t.length&&a&&0!==a.length){var n,r=Object(He.a)(t);try{for(r.s();!(n=r.n()).done;){if(!n.value.responses)return}}catch(p){r.e(p)}finally{r.f()}var o,c=a.reduce((function(e,t){return e[t.vocablo_palabra]=t,e}),{}),s={id:void 0,fecha:(new Date).toISOString(),total_consultas:0,total_correctas:0,usuario_id:null,tema_id:t[0].tema_id,grado_id:t[0].grado_id},i=[],l=t.length,d=0,j=Object(He.a)(t);try{for(j.s();!(o=j.n()).done;){var u=o.value;u.vocablo_palabra===u.responses[0]&&(d+=1);var b=c[u.responses[0]];console.log({voablosObj:c,consulta:u,response:u.responses}),i.push({id:void 0,tipo:u.tipo_consulta,vocablo_correcto_id:u.vocablo_id,vocablo_respuesta_id:b.vocablo_id,practica_id:null})}}catch(p){j.e(p)}finally{j.f()}return s.total_consultas=l,s.total_correctas=d,{practica:s,consultas:i,puntos:100*d,trofeos_imparables:l===d?1:0,trofeos_agil:dt({consultas:t})?1:0}}}function ut(e){var t=e.consultas;if(t&&0!==t.length){var a,n=Object(He.a)(t);try{for(n.s();!(a=n.n()).done;){if(!a.value.responses)return}}catch(j){n.e(j)}finally{n.f()}var r,o={log_name:"Practica",timestamp:(new Date).toISOString(),grado:t[0].grado_nombre,tema:t[0].tema_nombre,total_consultas:0,total_correctas:0,logs:[]},c=t.length,s=0,i=Object(He.a)(t);try{for(i.s();!(r=i.n()).done;){var l,d=r.value;if(d.vocablo_palabra===d.responses[0]&&(s+=1),d.logs&&d.logs.length>0)(l=o.logs).push.apply(l,Object(Ve.a)(d.logs.slice(0)))}}catch(j){i.e(j)}finally{i.f()}return o.total_consultas=c,o.total_correctas=s,[o,{log_name:"Aprendiz: Termina una pr\xe1ctica",timestamp:(new Date).toISOString(),grado:t[0].grado_nombre,tema:t[0].tema_grado}]}}function bt(){var e=n.useState(0),t=Object(d.a)(e,2),a=t[0],r=t[1],o=n.useState({}),c=Object(d.a)(o,2),s=c[0],p=c[1],h=n.useState([]),g=Object(d.a)(h,2),O=g[0],f=g[1],w=n.useState({}),_=Object(d.a)(w,2),C=_[0],I=_[1],D=Object(j.b)(),z=Object(d.a)(D,2),P=z[0],E=(z[1],n.useState([])),M=Object(d.a)(E,2),F=M[0],W=M[1],G=n.useState(!1),L=Object(d.a)(G,2),R=L[0],N=L[1],V=n.useState(),H=Object(d.a)(V,2),J=H[0],U=H[1],Y=n.useState(),q=Object(d.a)(Y,2),B=q[0],Q=q[1],Z=P.get("grado"),X=P.get("tema"),$=Object(u.h)(),K=function(){var e=Object(l.a)(i.a.mark((function e(){var t,a,n,r,o,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(!0),e.next=4,fetch("http://localhost:4000/vocablos-by-grado-tema/".concat(Z,"/").concat(X),{method:"GET",headers:{"Content-type":"application/json",token:localStorage.token}});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,W(a),N(!1),n=a&&a[0]?a[0].grado_nombre:null,r=a&&a[0]?a[0].tema_nombre:null,U(n),Q(r),o=lt({vocablos:a,numeroConsultas:10}),c=fe({logs:[{log_name:"Sistema: Inicia una consulta",timestamp:(new Date).toISOString(),tipo_consulta:o[0].tipo_consulta,palabras:o[0].palabras_consulta.slice(0),respuesta_correcta:o[0].vocablo_palabra}],consultas:o,index:0}),f(c),T({logs:[{log_name:"Aprendiz: Inicia una pr\xe1ctica",timestamp:(new Date).toISOString(),grado:c[0].grado_nombre,tema:c[0].tema_nombre}]}),e.next=25;break;case 20:e.prev=20,e.t0=e.catch(0),N(!1),console.error(e.t0),b.b.error("Error de red");case 25:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}();n.useEffect((function(){K()}),[]);var ee=function(){return O.length},ae=function(){return Object.keys(s).length===ee()},ne=function(){var e=a!==ee()-1||ae()?a+1:O.findIndex((function(e,t){return!(t in s)}));if(O[e]&&!O[e].logs){var t=fe({logs:[{log_name:"Sistema: Inicia una consulta",timestamp:(new Date).toISOString(),tipo_consulta:O[e].tipo_consulta,palabras:O[e].palabras_consulta.slice(0),respuesta_correcta:O[e].vocablo_palabra}],consultas:O,index:e});f(t)}r(e),me({consultas:O}),ge({consultas:O}),Oe({consultas:O})};console.log({steps:O.slice(0),completed:s,activeStep:a});var re=n.useState(!1),oe=Object(d.a)(re,2),ce=oe[0],ie=oe[1],le=n.useState(void 0),de=Object(d.a)(le,2),je=de[0],ue=de[1],be=function(e){var t=e.palabra,n=O[a];if(n.responses||(n.responses=[]),n.responses.push(t),f(O),je&&b.b.dismiss(je),n.vocablo_palabra===t){var r;r=n.responses&&n.responses[0]===n.vocablo_palabra?ot[Math.floor(Math.random()*ot.length)]:st[Math.floor(Math.random()*st.length)],ve({logs:[{log_name:"Aprendiz: Responde una consulta",timestamp:(new Date).toISOString(),respuesta_es_correcta:!0,respuesta_usuario:t},{log_name:"Sistema: Muestra gamificaci\xf3n por respuesta correcta",timestamp:(new Date).toISOString(),mensaje:r.message,image:r.imageSrc}]});var o=Object(b.b)(Object(A.jsx)(rt,{imageSrc:r.imageSrc,message:r.message}),{autoClose:2e3});ue(o),function(){var e=s;e[a]=!0,p(e),ne()}()}else{var c=ct[Math.floor(Math.random()*ct.length)];ve({logs:[{log_name:"Aprendiz: Responde una consulta",timestamp:(new Date).toISOString(),respuesta_es_correcta:!1,respuesta_usuario:t},{log_name:"Sistema: Muestra gamificaci\xf3n por respuesta incorrecta",timestamp:(new Date).toISOString(),mensaje:c.message,image:c.imageSrc},{log_name:"Sistema: Muestra correcci\xf3n",timestamp:(new Date).toISOString(),respuesta_correcta:n.vocablo_palabra}]});var i=Object(b.b)(Object(A.jsx)(rt,{imageSrc:c.imageSrc,message:c.message}),{autoClose:2e3});ue(i),ye()}},me=function(e){var t=function(e){var t=e.consultas;if(t&&0!==t.length)try{var a=t.length,n=0;return t.forEach((function(e){e.vocablo_palabra===e.responses[0]&&(n+=1)})),{totalConsultas:a,totalConsultasCorrectas:n,points:100*n,trofeos_imparables:a===n?1:0,trofeos_agil:dt({consultas:t})?1:0}}catch(r){}}({consultas:e.consultas});t&&I(t)},ge=function(){var e=Object(l.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.consultas,!(n=jt({consultas:a,vocablos:F}))){e.next=13;break}return e.prev=3,e.next=6,fetch("http://localhost:4000/practica",{method:"POST",headers:{"Content-type":"application/json",token:localStorage.token},body:JSON.stringify(n)});case 6:204===e.sent.status?b.b.success("Practica terminada correctamente"):b.b.error("Error desconocido"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),b.b.error("Error de conexion");case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(l.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.consultas,n=ut({consultas:a}),console.log({logs:n}),n&&T({logs:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(e){var t=e.logs,a=e.consultas,n=e.index;if(!t||0===t.length)return a;if(!a||0===a.length)return a;if("number"!==typeof n)return a;a[n].logs||(a[n].logs=[]);var r,o=Object(He.a)(t);try{for(o.s();!(r=o.n()).done;){var c=r.value;a[n].logs.push(c)}}catch(s){o.e(s)}finally{o.f()}return a.slice(0)},ve=function(e){var t=e.logs;if(t&&0!==t.length){var n=fe({logs:t,consultas:O,index:a});f(n)}},ye=function(){return ie(!0)},we=function(){ie(!1),ve({logs:[{log_name:"Aprendiz: Cierra modal de correci\xf3n",timestamp:(new Date).toISOString()}]})},_e=function(){ie(!1),ve({logs:[{log_name:"Aprendiz: Indica que entendi\xf3 correcci\xf3n",timestamp:(new Date).toISOString()}]})},Se=function(e){var t,a,n=e.vocablo,r=n&&n.recursos?n.recursos.findIndex((function(e){return"image"===e.tipo})):-1,o=n&&n.recursos?n.recursos.findIndex((function(e){return"video"===e.tipo})):-1;return-1!==r&&(t=n.recursos[r].enlace),-1!==o&&(a=n.recursos[o].enlace),Object(A.jsx)("div",{children:n?Object(A.jsx)(Me.a,{open:ce,onClose:we,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:Object(A.jsx)(y.a,{sx:We,children:Object(A.jsxs)(v.a,{container:!0,spacing:{xs:2,sm:3,md:3},columns:{xs:4,sm:8,md:8},children:[Object(A.jsxs)(v.a,{item:!0,xs:4,sm:4,md:4,children:[Object(A.jsx)(S.a,{id:"keep-mounted-modal-title",variant:"subtitle2",children:"Imagen"}),Object(A.jsx)(Te.a,{component:"img",sx:{maxWidth:350,maxHeight:300},image:t,alt:"imagen del vocablo ".concat(n.vocablo_palabra)})]}),Object(A.jsxs)(v.a,{item:!0,xs:4,sm:4,md:4,children:[Object(A.jsx)(S.a,{id:"keep-mounted-modal-title",variant:"subtitle2",children:"Video"}),Object(A.jsx)(Fe,{embedLink:a})]}),Object(A.jsxs)(v.a,{item:!0,xs:4,sm:4,md:4,children:[Object(A.jsx)(S.a,{id:"keep-mounted-modal-description",variant:"subtitle2",children:"Palabra"}),Object(A.jsx)(S.a,{id:"keep-mounted-modal-title",variant:"h3",component:"h2",style:{backgroundColor:"yellow"},children:n.vocablo_palabra})]}),Object(A.jsx)(v.a,{item:!0,xs:4,sm:4,md:4,style:{minHeight:"150px",display:"flex",justifyContent:"flex-end",alignItems:"flex-end",alignSelf:"stretch"},children:Object(A.jsx)(m.a,{variant:"contained",color:"success",onClick:_e,children:"Entendido"})})]})})}):null})},Ce=n.useState(!1),ke=Object(d.a)(Ce,2),Ie=ke[0],De=ke[1],ze=n.useState(),Ae=Object(d.a)(ze,2),Pe=Ae[0],Ee=Ae[1],Ge=function(){var e=Pe;De(!1),Ee(void 0),"imparable"===e.type?I(Object(x.a)(Object(x.a)({},C),{},{trofeos_imparables_showed:!0,trofeo_showing:!1})):"agil"===e.type&&I(Object(x.a)(Object(x.a)({},C),{},{trofeos_agil_showed:!0,trofeo_showing:!1}))};C&&C.trofeos_imparables&&!C.trofeos_imparables_showed&&!C.trofeo_showing?(I(Object(x.a)(Object(x.a)({},C),{},{trofeo_showing:!0})),Ee({type:"imparable",title:"Ganaste un trofeo Imparable",message:""}),De(!0)):C&&C.trofeos_agil&&!C.trofeos_agil_showed&&!C.trofeo_showing&&(I(Object(x.a)(Object(x.a)({},C),{},{trofeo_showing:!0})),Ee({type:"agil",title:"Ganaste un trofeo Agil",message:""}),De(!0)),console.log({results:C,trofeoData:Pe});var Le=function(e){var t,a=e.trofeo;return a?("imparable"===a.type?t="/assets/trofeos/imparable.png":"agil"===a.type&&(t="/assets/trofeos/agil.png"),Object(A.jsx)("div",{children:a?Object(A.jsx)(Me.a,{open:Ie,onClose:Ge,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:Object(A.jsxs)(y.a,{sx:it,children:[Object(A.jsx)(Te.a,{component:"img",sx:{maxWidth:300,maxHeight:300},image:t,alt:"trofeo ".concat(a.type)}),Object(A.jsx)(S.a,{id:"keep-mounted-modal-title",variant:"h5",color:"success",children:a.title}),Object(A.jsx)(S.a,{id:"keep-mounted-modal-title",variant:"subtitle2",children:a.message}),Object(A.jsxs)(y.a,{sx:{display:"flex",flexDirection:"row",pt:2},children:[Object(A.jsx)(y.a,{sx:{flex:"1 1 auto"}}),Object(A.jsx)(m.a,{"aria-label":"close modal",onClick:Ge,children:"Ok"})]})]})}):null})):null};return R?Object(A.jsx)(v.a,{container:!0,direction:"row",justifyContent:"center",children:Object(A.jsx)(k.a,{color:"inherit",size:25})}):Object(A.jsxs)(y.a,{sx:{width:"100%"},children:[Object(A.jsx)(y.a,{style:{display:"flex",justifyContent:"space-between",marginBottom:"32px"},children:Object(A.jsx)(m.a,{variant:"outlined",color:"warning",startIcon:Object(A.jsx)(se.a,{}),onClick:function(){window.history.back()},children:"Volver"})}),Object(A.jsx)(Je.a,{nonLinear:!0,activeStep:a,children:O.map((function(e,t){return Object(A.jsx)(Ue.a,{completed:s[t],children:Object(A.jsx)(Ye.a,{color:"inherit",onClick:(a=t,function(){r(a)}),children:""})},"step-".concat(t));var a}))}),Object(A.jsx)("div",{children:ae()?Object(A.jsxs)(n.Fragment,{children:[Object(A.jsx)(S.a,{variant:"h4",sx:{mt:2,mb:1},children:"Practica Finalizada"}),Object(A.jsxs)(y.a,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-around",marginTop:"24px"},children:[Object(A.jsx)(y.a,{children:Object(A.jsxs)(te.a,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"},component:"nav","aria-labelledby":"nested-list-subheader",subheader:Object(A.jsx)(qe.a,{component:"div",id:"nested-list-subheader",children:"Resultados"}),children:[Object(A.jsxs)(pe.a,{children:[Object(A.jsx)(xe.a,{children:Object(A.jsx)(Qe.a,{color:"primary"})}),Object(A.jsx)(he.a,{primary:J,secondary:"Grado"})]},"list-1"),Object(A.jsxs)(pe.a,{children:[Object(A.jsx)(xe.a,{children:Object(A.jsx)(Xe.a,{color:"primary"})}),Object(A.jsx)(he.a,{primary:B,secondary:"Tema"})]},"list-2"),Object(A.jsxs)(pe.a,{children:[Object(A.jsx)(xe.a,{children:Object(A.jsx)(Ke.a,{color:"primary"})}),Object(A.jsx)(he.a,{primary:"".concat(C.totalConsultasCorrectas,"/").concat(C.totalConsultas),secondary:"Respuestas correctas"})]},"list-3"),Object(A.jsxs)(pe.a,{children:[Object(A.jsx)(xe.a,{children:Object(A.jsx)(tt.a,{color:"primary"})}),Object(A.jsx)(he.a,{primary:C.points,secondary:"Puntos"})]},"list-4")]})}),Object(A.jsxs)(y.a,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(A.jsx)(Te.a,{component:"img",sx:{maxWidth:200,maxHeight:200},image:"/assets/trofeos/reward-practica.png"}),Object(A.jsx)(S.a,{variant:"h4",sx:{mt:2,mb:1},children:"Muy bien!"})]})]}),Object(A.jsxs)(y.a,{sx:{display:"flex",flexDirection:"row",justifyContent:"flex-end",marginTop:"24px"},children:[Object(A.jsx)(m.a,{variant:"outlined",color:"secondary",startIcon:Object(A.jsx)(se.a,{}),onClick:function(){$("/dashboard/explorar?grado=".concat(Z,"&tema=").concat(X),{replace:!0})},children:"Volvar al tema"}),Object(A.jsx)(m.a,{variant:"contained",color:"primary",endIcon:Object(A.jsx)(nt.a,{}),onClick:function(){r(0),p({}),K()},style:{marginLeft:"24px"},children:"Comenzar otra practica"})]})]}):Object(A.jsx)(n.Fragment,{children:Object(A.jsxs)(y.a,{sx:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[Object(A.jsx)(y.a,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-around",marginTop:"24px"},children:Object(A.jsx)(Te.a,{component:"img",sx:{maxWidth:350,maxHeight:300},image:O[a].imageSrc,alt:"imagen del vocablo ".concat(O[a].vocablo_palabra)})}),Object(A.jsx)(y.a,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-around",marginTop:"24px"},children:O[a].palabras_consulta.map((function(e){return Object(A.jsx)(m.a,{variant:"outlined",color:"success",onClick:function(){return be({palabra:e})},children:e})}))})]})})}),Object(A.jsx)(Se,{vocablo:O[a]}),Object(A.jsx)(Le,{trofeo:Pe})]})}var pt=a(328),xt=a(332),ht=a(331),mt=a(327),gt=a(329),Ot=a(330),ft=a(314),vt=a(152),yt=a.n(vt),wt=a(300),_t=a(336),St=a(151),Ct=a.n(St),kt=a(120),It=a.n(kt),Dt=a(307),zt={position:"absolute",top:"20%",left:"20%",transform:"translate(-10%, -10%)",width:"80%",minHeight:"400px",height:"80%",maxHeight:"80%",bgcolor:"background.paper",border:"1px solid #666",borderRadius:"16px",boxShadow:24,overflowY:"hidden"};function Tt(e){var t="".concat(e.getFullYear()),a="".concat(e.getMonth()+1);a=1===a.length?"0".concat(a):a;var n="".concat(e.getDate());return n=1===n.length?"0".concat(n):n,"".concat(t,"-").concat(a,"-").concat(n)}function At(e){var t="".concat(e.getFullYear()),a="".concat(e.getMonth()+1);a=1===a.length?"0".concat(a):a;var n="".concat(e.getDate());return n=1===n.length?"0".concat(n):n,"".concat(n,"/").concat(a,"/").concat(t)}function Pt(e){return Object(A.jsxs)(y.a,{sx:{display:"flex",alignItems:"center"},children:[Object(A.jsx)(y.a,{sx:{width:"100%",mr:1},children:Object(A.jsx)(_t.a,Object(x.a)({variant:"determinate"},e))}),Object(A.jsx)(y.a,{sx:{minWidth:35},children:Object(A.jsx)(S.a,{variant:"body2",color:"text.secondary",children:"".concat(Math.round(e.value),"%")})})]})}function Et(e){var t=e.usuarioRowData,a=e.setOpenModal,r=n.useState(!0),o=Object(d.a)(r,2),c=o[0],s=o[1],j=n.useState(!1),u=Object(d.a)(j,2),b=u[0],p=u[1],g=n.useState(),f=Object(d.a)(g,2),w=f[0],_=f[1],C=n.useState(),I=Object(d.a)(C,2),D=I[0],z=I[1],T=n.useState(),P=Object(d.a)(T,2),E=P[0],M=P[1],F=n.useState(),W=Object(d.a)(F,2),V=W[0],H=W[1],J=n.useState(new Date),U=Object(d.a)(J,2),Y=U[0],q=U[1],B=n.useState(new Date),Q=Object(d.a)(B,2),Z=Q[0],X=Q[1],$=n.useState(!0),K=Object(d.a)($,2),ee=K[0],ae=K[1],re=function(e){var t=e.newFromDate,a=e.newToDate;t&&a?t.getTime()>a.getTime()?ae(!1):ae(!0):ae(!1)},oe=function(){s(!1),a(!1)},ce=function(){var e=Object(l.a)(i.a.mark((function e(t){var a,n,r,o,c,s,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.usuarioTargetId,n=t.grado,r=t.range,e.prev=1,p(!0),o="http://localhost:4000/aprendices-monitor/user/".concat(a),"number"!==typeof n||r?"number"!==typeof n&&r?o="".concat(o,"?start=").concat(r.start,"&end=").concat(r.end):"number"===typeof n&&r&&(o="".concat(o,"?grado=").concat(n,"&start=").concat(r.start,"&end=").concat(r.end)):o="".concat(o,"?grado=").concat(n),e.next=7,fetch(o,{method:"GET",headers:{"Content-type":"application/json",token:localStorage.token}});case 7:return c=e.sent,e.next=10,c.json();case 10:s=e.sent,console.log({responseData:s}),_(s),p(!1),s.grados&&(l=s.grados.reduce((function(e,t){return e[t.id]=t,e}),{}),M(l)),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),p(!1),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}();return n.useEffect((function(){ce({usuarioTargetId:t.aprendiz_id,grado:D,range:V})}),[]),console.log({grados:E,gradoSelected:D}),Object(A.jsx)("div",{children:Object(A.jsx)(Me.a,{open:c,onClose:oe,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:Object(A.jsxs)(y.a,{sx:zt,children:[Object(A.jsxs)(y.a,{sx:{display:"flex",flexDirection:"row",pt:2,paddingLeft:"24px"},children:[Object(A.jsx)(S.a,{variant:"h4",color:"primary",children:"".concat(t.nombre," ").concat(t.apellido)}),Object(A.jsx)(y.a,{sx:{flex:"1 1 auto"}}),Object(A.jsx)(ne.a,{"aria-label":"close modal",onClick:oe,children:Object(A.jsx)(Ct.a,{})})]}),b?Object(A.jsx)(v.a,{container:!0,direction:"row",justifyContent:"center",children:Object(A.jsx)(k.a,{color:"inherit",size:30})}):Object(A.jsxs)(y.a,{sx:{width:"100%",height:"100%",overflowY:"scroll",padding:"16px",paddingBottom:"64px"},children:[Object(A.jsx)(S.a,{variant:"h6",children:"Filtros para consultar"}),Object(A.jsx)(L.a,{dateAdapter:G.a,children:Object(A.jsxs)(N.a,{direction:"row",spacing:3,sx:{margin:"24px"},children:[Object(A.jsx)(R.a,{disableFuture:!0,label:"Desde",openTo:"year",views:["year","month","day"],value:Y,onChange:function(e){q(e),re({newFromDate:e,newToDate:Z}),console.log({newValue:e,typeof:typeof e})},renderInput:function(e){return Object(A.jsx)(O.a,Object(x.a)({},e))}}),Object(A.jsx)(R.a,{disableFuture:!0,label:"Hasta",openTo:"year",views:["year","month","day"],value:Z,onChange:function(e){X(e),re({newFromDate:Y,newToDate:e}),console.log({newValue:e,typeof:typeof e})},renderInput:function(e){return Object(A.jsx)(O.a,Object(x.a)({},e))}}),Object(A.jsx)(m.a,{variant:"contained",color:"primary",disabled:!ee,onClick:function(){!function(e){var a=e.fromDate1,n=e.toDate1,r=Tt(a),o=Tt(n);console.log({fromDate1:a,toDate1:n,start:r,end:o}),H({start:r,end:o}),ce({usuarioTargetId:t.aprendiz_id,grado:D,range:{start:r,end:o}})}({fromDate1:Y,toDate1:Z})},children:"Consultar"})]})}),w&&w.grados?Object(A.jsxs)(N.a,{direction:"row",spacing:1,sx:{margin:"0px 24px 24px 24px"},children:[void 0===D?Object(A.jsx)(Dt.a,{label:"Todo",color:"primary"}):Object(A.jsx)(Dt.a,{label:"Todo",variant:"outlined",onClick:function(){z(void 0),ce({usuarioTargetId:t.aprendiz_id,grado:void 0,range:V})}}),w.grados.map((function(e){return D===e.id?Object(A.jsx)(Dt.a,{label:e.nombre,color:"primary"}):Object(A.jsx)(Dt.a,{label:e.nombre,variant:"outlined",onClick:function(){z(e.id),ce({usuarioTargetId:t.aprendiz_id,grado:e.id,range:V})}})}))]}):null,Object(A.jsxs)(y.a,{children:[E&&void 0!==D?Object(A.jsxs)(S.a,{variant:"subtitle1",children:[" ","Aplicando filtro por grado: ",Object(A.jsx)(S.a,{variant:"string",color:"primary",children:E[D].nombre}),Object(A.jsx)(ne.a,{"aria-label":"emove filter",onClick:function(){z(void 0),ce({usuarioTargetId:t.aprendiz_id,grado:void 0,range:V})},children:Object(A.jsx)(It.a,{sx:{color:"red"}})})]}):null,V?Object(A.jsxs)(S.a,{variant:"subtitle1",children:[" ","Aplicando filtro por rango: ","Desde ",Object(A.jsx)(S.a,{variant:"string",color:"primary",children:At(Y)})," hasta ",Object(A.jsx)(S.a,{variant:"string",color:"primary",children:At(Z)}),Object(A.jsx)(ne.a,{"aria-label":"remove filter",onClick:function(){H(void 0),ce({usuarioTargetId:t.aprendiz_id,grado:D,range:void 0})},children:Object(A.jsx)(It.a,{sx:{color:"red"}})})]}):null]}),Object(A.jsx)(S.a,{variant:"h6",children:"Informaci\xf3n acerca de las practicas"}),Object(A.jsx)(mt.a,{component:ft.a,sx:{margin:"24px 0px"},children:Object(A.jsxs)(pt.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(A.jsx)(gt.a,{children:Object(A.jsxs)(Ot.a,{children:[Object(A.jsxs)(ht.a,{align:"right",children:["Practicas",Object(A.jsx)("br",{}),"realizadas"]}),Object(A.jsxs)(ht.a,{align:"right",children:["Practicas",Object(A.jsx)("br",{}),"ultimos 7 dias"]}),Object(A.jsxs)(ht.a,{align:"right",children:["Consultas",Object(A.jsx)("br",{}),"correctas"]}),Object(A.jsxs)(ht.a,{align:"right",children:["Consultas",Object(A.jsx)("br",{}),"incorrectas"]}),Object(A.jsx)(ht.a,{align:"right",children:"Puntos"}),Object(A.jsx)(ht.a,{align:"right",children:"Trofeos"})]})}),Object(A.jsx)(xt.a,{children:Object(A.jsxs)(Ot.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(A.jsx)(ht.a,{align:"right",children:w&&w.practicas_realizadas?w.practicas_realizadas:0}),Object(A.jsx)(ht.a,{align:"right",children:w&&w.practicas_last_7days?w.practicas_last_7days:0}),Object(A.jsx)(ht.a,{align:"right",children:w&&w.total_correctas?w.total_correctas:0}),Object(A.jsx)(ht.a,{align:"right",children:w&&w.total_incorrectas?w.total_incorrectas:0}),Object(A.jsx)(ht.a,{align:"right",children:w&&w.total_correctas?100*w.total_correctas:0}),Object(A.jsx)(ht.a,{align:"right",children:void 0===D&&w&&w.trofeos?"".concat(w.trofeos.imparable||0," Imparables, ").concat(w.trofeos.agil||0," Agil, ").concat(t.trofeos_leal," Leal"):w&&w.trofeos?"".concat(w.trofeos.imparable||0," Imparables, ").concat(w.trofeos.agil||0," Agil"):""})]},"row-x-1")})]})}),Object(A.jsx)(S.a,{variant:"h6",children:"Vocablos vistos y contestados de forma correcta por tema"}),Object(A.jsx)(te.a,{sx:{width:"100%",bgcolor:"background.paper"},children:w&&w.temas_data?w.temas_data.map((function(e){var t=e.vocablos_correctos_counter||0,a=e.vocablos_vistos_counter||0,r=e.vocablos_counter||0;return 0===r?null:Object(A.jsxs)(wt.a,{children:[Object(A.jsx)(Se.a,{children:Object(A.jsx)(h.a,{src:e.data.image_src})}),Object(A.jsx)(he.a,{primary:e.data.nombre,secondary:Object(A.jsxs)(n.Fragment,{children:[Object(A.jsxs)(y.a,{sx:{width:"100%"},children:[Object(A.jsxs)("span",{style:{fontSize:"90%"},children:["Vistos (","".concat(a,"/").concat(r),")"]}),Object(A.jsx)(Pt,{value:a/r*100,color:"secondary"})]}),Object(A.jsxs)(y.a,{sx:{width:"100%"},children:[Object(A.jsxs)("span",{style:{fontSize:"90%"},children:["Correctos (","".concat(t,"/").concat(r),")"]}),Object(A.jsx)(Pt,{value:t/r*100})]})]})})]},e.tema_id)})):null})]})]})})})}function Mt(){var e=n.useState(!1),t=Object(d.a)(e,2),a=t[0],r=t[1],o=n.useState([]),c=Object(d.a)(o,2),s=c[0],j=c[1],u=n.useState(!1),p=Object(d.a)(u,2),x=p[0],h=p[1],g=n.useState(),f=Object(d.a)(g,2),v=f[0],w=f[1],_=n.useState(!1),C=Object(d.a)(_,2),I=C[0],D=C[1],z=n.useState(),T=Object(d.a)(z,2),P=T[0],E=T[1],M=function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,h(!0),a={correo:P},e.next=6,fetch("http://localhost:4000/aprendices-monitor/add",{method:"POST",headers:{"Content-type":"application/json",token:localStorage.token},body:JSON.stringify(a)});case 6:204===e.sent.status?b.b.success("Usuario agregado al monitor correctamente."):b.b.error("Error desconocido"),F(),h(!1),E(void 0),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0.message),h(!1);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(!0),e.next=4,fetch("http://localhost:4000/aprendices-monitor/users",{method:"GET",headers:{"Content-type":"application/json",token:localStorage.token}});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,console.log({responseData:a}),j(a),r(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0.message),r(!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(l.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.correo,e.prev=1,w(a),n={correo:a},e.next=6,fetch("http://localhost:4000/aprendices-monitor/remove",{method:"POST",headers:{"Content-type":"application/json",token:localStorage.token},body:JSON.stringify(n)});case 6:204===e.sent.status?b.b.success("Usuario eliminado correctamente."):b.b.error("Error desconocido"),F(),w(void 0),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0.message),w(void 0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();n.useEffect((function(){F()}),[]);var G=n.useState(!1),L=Object(d.a)(G,2),R=L[0],N=L[1],V=n.useState(),H=Object(d.a)(V,2),J=H[0],U=H[1];return Object(A.jsxs)(y.a,{sx:{display:"flex",flexDirection:"column"},children:[Object(A.jsx)(y.a,{children:Object(A.jsx)(S.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,sx:{flexGrow:1},children:"Agrega aprendices para ser monitoreados"})}),Object(A.jsxs)(y.a,{component:"form",onSubmit:M,noValidate:!0,sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(A.jsx)(O.a,{margin:"normal",error:I,required:!0,id:"email",label:"Correo electronico",name:"email",type:"email",onChange:function(e){var t=e.target.value;Y(t)?D(!1):D(!0),E(t)},autoComplete:"email"}),Object(A.jsx)(m.a,{type:"submit",variant:"contained",color:"primary",disabled:!P||I||x,sx:{marginLeft:"24px"},children:x?Object(A.jsx)(k.a,{color:"inherit",size:25}):"Agregar aprendiz para monitorear"})]}),Object(A.jsx)(y.a,{sx:{marginTop:"32px"},children:Object(A.jsxs)(S.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,sx:{flexGrow:1},children:["Aprendices monitoreando ",a?Object(A.jsx)(k.a,{color:"primary",size:20}):null]})}),Object(A.jsx)(y.a,{children:Object(A.jsx)(mt.a,{component:ft.a,children:Object(A.jsxs)(pt.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(A.jsx)(gt.a,{children:Object(A.jsxs)(Ot.a,{children:[Object(A.jsx)(ht.a,{children:"Nombre"}),Object(A.jsx)(ht.a,{align:"right",children:"Correo"}),Object(A.jsxs)(ht.a,{align:"right",children:["Practicas",Object(A.jsx)("br",{}),"realizadas"]}),Object(A.jsxs)(ht.a,{align:"right",children:["Consultas",Object(A.jsx)("br",{}),"correctas"]}),Object(A.jsxs)(ht.a,{align:"right",children:["Consultas",Object(A.jsx)("br",{}),"incorrectas"]}),Object(A.jsx)(ht.a,{align:"right",children:"Puntos"}),Object(A.jsx)(ht.a,{align:"right",children:"Trofeos"}),Object(A.jsx)(ht.a,{align:"right",children:"Acci\xf3n"})]})}),Object(A.jsx)(xt.a,{children:s.map((function(e){return Object(A.jsxs)(Ot.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(A.jsx)(ht.a,{component:"th",scope:"row",children:Object(A.jsx)(m.a,{variant:"text",onClick:function(){U(e),N(!0)},children:"".concat(e.nombre," ").concat(e.apellido)})}),Object(A.jsx)(ht.a,{align:"right",children:e.correo}),Object(A.jsx)(ht.a,{align:"right",children:e.practicas_realizadas}),Object(A.jsx)(ht.a,{align:"right",children:e.consultas_correctas}),Object(A.jsx)(ht.a,{align:"right",children:e.consultas_incorrectas}),Object(A.jsx)(ht.a,{align:"right",children:e.puntos_acumulados}),Object(A.jsx)(ht.a,{align:"right",children:"".concat(e.trofeos_imparables," Imparables, ").concat(e.trofeos_agil," Agil, ").concat(e.trofeos_leal," Leal")}),Object(A.jsx)(ht.a,{align:"right",children:v!==e.correo?Object(A.jsx)(ne.a,{color:"error","aria-label":"remove element",component:"span",onClick:Object(l.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W({correo:e.correo});case 2:case"end":return t.stop()}}),t)}))),children:Object(A.jsx)(yt.a,{})}):Object(A.jsx)(k.a,{color:"error",size:20})})]},e.correo)}))})]})})}),R?Object(A.jsx)(Et,{usuarioRowData:J,setOpenModal:N}):null]})}var Ft=function(e){var t=e.isAuthenticated,a=e.setAuth;return Object(A.jsxs)(u.e,{children:[Object(A.jsx)(u.c,{index:!0,path:"/",element:t?Object(A.jsx)(u.a,{to:"/dashboard"}):Object(A.jsx)(M,{setAuth:a})}),Object(A.jsx)(u.c,{path:"/login",element:t?Object(A.jsx)(u.a,{to:"/dashboard"}):Object(A.jsx)(M,{setAuth:a})}),Object(A.jsx)(u.c,{path:"/register",element:t?Object(A.jsx)(u.a,{to:"/dashboard"}):Object(A.jsx)(Q,{setAuth:a})}),Object(A.jsxs)(u.c,{path:"/dashboard",element:t?Object(A.jsx)(_e,{setAuth:a}):Object(A.jsx)(u.a,{to:"/login"}),children:[Object(A.jsx)(u.c,{path:"explorar",element:Object(A.jsx)(Ne,{})}),Object(A.jsx)(u.c,{path:"practica",element:Object(A.jsx)(bt,{})}),Object(A.jsx)(u.c,{path:"aprendices",element:Object(A.jsx)(Mt,{})})]})]})},Wt=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],r=t[1];Object(n.useEffect)((function(){o()}),[]);var o=function(){var e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:4000/auth/verify",{method:"POST",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,r(!0===a),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),console.log({err:e.t0}),console.error(e.t0.message),r(!1);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(j.a,{children:Object(A.jsxs)("div",{className:"",children:[Object(A.jsx)(Ft,{isAuthenticated:a,setAuth:function(e){console.log("auth changed",{status:e}),r(e)}}),Object(A.jsx)(b.a,{})]})})})},Gt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,338)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),o(e),c(e)}))};a(214);c.a.render(Object(A.jsx)(r.a.StrictMode,{children:Object(A.jsx)(Wt,{})}),document.getElementById("root")),Gt()}},[[215,1,2]]]);
//# sourceMappingURL=main.bf709675.chunk.js.map